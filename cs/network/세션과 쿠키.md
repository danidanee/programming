# 세션과 쿠키

> 세션 : 일정 시간동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 일정하게 유지시키는 기술
>
> 쿠키 : HTTP의 일종으로 사용자가 어떠한 웹 사이트를 방문할 경우, 그 사이트가 사용하고 있는 서버에서 **사용자의 컴퓨터에 저장하는 작은 기록 정보 파일**이다.

<br/>

* 현재 우리가 인터넷에서 사용하고 있는 HTTP프로토콜은 연결 지향적인 성격을 버렸기 때문에 `새로운 페이지를 요청할 때마다 새로운 접속`이 이루어지며 이전 페이지와 현재 페이지 간의 관계가 지속되지 않는다.
* 이에 따라 HTTP프로토콜을 이용하게 되는 웹사이트에서는 웹페이지에 특정 방문자가 머무르고 있는 동안에 그 `방문자의 상태를 지속`시키기 위해 쿠키와 세션을 이용한다.
  * 사용자의 요청마다 연결과 해제를 하고 연결 상태를 유지하지 않고 연결이 해제되면 상태 정보를 저장하지 않기 때문에 서버의 자원을 절약

→ http의 `비연결성 지향`, `상태 정보 유지 안하는` 특징때문에<span style="color:red"> **정보를 유지하기 위해 사용하는 것**</span>

<br/>

### 세션

* 일정시간은 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료해 연결을 끝내는 시점
* 웹 서버에 웹 컨테이너의 상태를 유지하기 위한 정보를 저장
* 브라우저를 닫거나, 서버에서 세션을 삭제했을때만 삭제가 되므로, 쿠키보다 비교적 보안이 좋다.
* 저장 데이터에 제한이 없다.
* 각 클라이언트는 `고유 세션 ID`를 부여받는데, 이것으로 클라이언트를 구분해 각 클라이언트 요구에 맞는 서비스를 제공한다.

<br/>

### 쿠키

* HTTP에서 클라이언트의 상태 정보를 클라이언트의 PC (하드 디스크)에 저장하였다가 **필요시 정보를 참조하거나 재사용할 수 있다**
* 이름, 값, 만료일, 경로 정보로 구성
* 만약에 한 도메인당 쿠키값이 20개를 초과해버리면, 가장 적게 사용된 쿠키부터 사라짐.
* (예시) 팝업에서 "오늘 이 창을 다시 보지 않음"체크, 쇼핑몰의 장바구니 역할

<br/>

**Q. 세션을 쓰면되는데 굳이 쿠키를 사용하는 이유?**

**A.** 세션이 쿠키에 비해 보안도 높은 편이나 쿠키를 사용하는 이유는 세션은 서버에 저장되고, 서버자원을 사용하기 때문에 사용자가 많을 경우 소모되는 자원이 상당하다.
이러한 자원관리 차원에서 쿠키와 세션을 적절한 요소 및 기능에 병행 사용하여, 서버 자원의 낭비를 방지하며 웹사이트의 속도를 높일 수 있다.

<br/>

* **공통점** : 웹 통신간 **유지하려는 정보**(ex:로그인 정보 등)**를 저장**하기 위해 사용하는 것
  * 쿠키(Cookie)와 세션(Session)은 기능상 비슷한 역할을 하고, 동작원리도 비슷하다. 왜냐하면, 일반적인 세션은 쿠키를 바탕으로 동작하기 때문
* **차이점** : 저장위치, 저장형식, 용량제한, 만료시점 등
  * **세션** : 접속중인 **웹 서버**에 저장됨 → 서버의 자원 사용
    * **쿠키** : **개인 PC**에 저장됨

<br/>

|           | 세션                                      | 쿠키                                                         |
| --------- | ----------------------------------------- | ------------------------------------------------------------ |
| 저장 위치 | 웹 서버                                   | 클라인언트<br/>(접속자 PC)                                   |
| 저장 형식 | Object                                    | text                                                         |
| 만료 시점 | 브라우저 종료시 삭제<br/>(기간 지정 가능) | 쿠키 저장시 설정<br/>(브라우저가 종료되도, 만료시점이<br/>지나지 않으면 자동 삭제되지 않음) |
| 사용 자원 | 웹 서버 리소스                            | 클라이언트 리소스                                            |
| 용량 제한 | 서버가 허용하는 한 용량제한 없음          | 총 300개<br/>하나의 도메인 당 20개<br/>하나의 쿠키 당 4KB    |
| 속도      | 쿠키보다 느림                             | 세션보다 빠름                                                |
| 보안      | 쿠키보다 좋음                             | 세션보다 안좋음                                              |

* 쿠키는 로컬에 정보가 있기 때문에 비교적 속도가 빠르고 세션은 정보가 서버에 있기 때문에 처리가 요구되어 비교적 느린 속도를 낸다.
* 쿠키는 클라이언트의 로컬에 파일로 저장되기 때문에 변질되거나 request에서 스나이핑 당할 우려가 있어 보안에 취약.
* 하지만 세션은 쿠키를 이용하여 sessionId만 저장하고 이를 서버에서 처리하기 때문에 비교적 보안성이 좋다.

<br/>

------

[참고 자료]

https://easy-h.tistory.com/2

https://hahahoho5915.tistory.com/32

https://sambalim.tistory.com/51

https://ikso2000.tistory.com/67